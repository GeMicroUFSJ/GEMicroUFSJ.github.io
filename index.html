
<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Validação de Certificados - GEMICRO / UFSJ</title>
<style>
body { font-family: Arial, sans-serif; margin: 40px; text-align: center; }
.header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; }
.header img { height: 100px; }
.title { font-size: 28px; font-weight: bold; margin-bottom: 30px; }
input { padding: 8px; width: 300px; font-size: 16px; }
button { padding: 8px 14px; font-size: 16px; margin-left: 10px; cursor: pointer; }
#resultado { margin-top: 25px; font-size: 18px; }
</style>
</head>
<body>

<div class="header">
  <img src="menu-logo_menor.png" alt="UFSJ">
  <img src="Logo_oficial.jpg" alt="GEMICRO">
</div>

<div class="title">Sistema de Validação de Certificados – GEMICRO / UFSJ</div>

<p>Digite o código de validação do certificado:</p>

<input type="text" id="codigoInput" placeholder="Ex.: GEMICRO-UFSJ-000001">
<button onclick="validarCodigo()">Validar</button>

<div id="resultado"></div>

<script>
let dados = [];

// Carrega todos os arquivos JSON listados no manifest.json
async function carregarArquivos() {
    try {
        const manifest = await fetch("manifest.json").then(r => r.json());

        for (const arquivo of manifest.arquivos) {
            const j = await fetch(arquivo).then(r => r.json());
            dados = dados.concat(j.certificados);
        }

        console.log("Certificados carregados:", dados.length);

    } catch (e) {
        console.error("Erro ao carregar arquivos:", e);
    }
}

carregarArquivos();

function validarCodigo() {
    const codigo = document.getElementById("codigoInput").value.trim();
    const div = document.getElementById("resultado");

    if (!codigo) {
        div.innerHTML = "<span style='color:#b00;'>❗ Digite um código.</span>";
        return;
    }

    const item = dados.find(x => x.codigo.toUpperCase() === codigo.toUpperCase());

    if (item) {
        div.innerHTML = "<span style='color:green;'>✔ Certificado válido.</span><br>Emitido para: <b>" 
                        + item.nome + "</b>";
    } else {
        div.innerHTML = "<span style='color:#b00;'>✖ Código inválido.</span>";
    }
}
</script>
  <hr style="margin-top: 40px;">

<div style="margin-top: 25px; text-align: center;">

  <p style="font-size: 16px; font-weight: bold; margin-bottom: 10px;">
    Contato
  </p>

  <!-- Ícones -->
  <a href="https://www.instagram.com/gemicro_ufsj/" target="_blank" 
     style="margin-right: 20px; text-decoration: none;">
    <img src="https://cdn-icons-png.flaticon.com/512/2111/2111463.png" 
         alt="Instagram" width="40" height="40">
  </a>

  <a href="mailto:gemicro@ufsj.edu.br" 
     style="text-decoration: none;">
    <img src="https://cdn-icons-png.flaticon.com/512/732/732200.png" 
         alt="Email" width="40" height="40">
  </a>

</div>

</body>
</html>
